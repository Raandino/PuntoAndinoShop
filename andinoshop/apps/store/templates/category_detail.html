{% extends 'base.html' %}

{% block title %}{{ category.title }} | {% endblock %}
{% block content %}
<div class="pt-2 px-md-4 mb-3 bg-white border-bottom shadow-sm" id="search-query">
   
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb" style="background-color: white;">
            <li class="breadcrumb-item"><a href="{% url 'frontpage' %}" style="color: black;">Inicio</a></li>
            {% if category.parent %}
                <li class="breadcrumb-item" ><a href="{% url 'category_detail' category.parent.slug %}" style="color: black;">{{category.parent.title}}</a></li>
            {% endif %}
                <li class="breadcrumb-item active" >{{category.title}}</li>
        </ol>
 
    </nav>
</div>




<div class="container-fluid">
    <div class="row">
    <nav class="col-md-3 col-lg-2 d-md-block bg-light sidebar collapse">
        <div class="sidebar-sticky pt-3">
            <ul class="nav flex-column">
                <h6 class="sidebar-heading d-flex justify-content-between mb-3 text-muted">
                   <span>Filtro</span> 
                </h6>
                <form action="" method="GET">
                    <div class="form-group">
                        <label for="brand">Marca</label>
                        <select id="brand" class="form-control" name="brand" id="">
                           <option selected>Escoger...</option> 
                           {% for brand in q %}
                                <option value="{{ brand.brand }}">{{ brand.brand }}</option>
                           {% endfor %}
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="pricemin">Precio minimo</label>
                        <input type="number" min=0 class="form-control" id="pricemin" name="price_min" placeholder="0">
                    </div>
                    <div class="form-group">
                        <label for="pricemax">Precio Maximo</label>
                        <input type="number" min=0 class="form-control" id="pricemax" name="price_max" placeholder="1000?">
                    </div>
                    
                    <p>Ordenar por:</p>
                    <div class="form-group">
                        <div class="form-check">
                        <input type="checkbox" class="form-check-input" id="featured" name="featured">
                        <label class="form-check-label" for="featured">Destacados</label>
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="form-check">
                        <input type="checkbox" class="form-check-input" id="discount" name="discount">
                        <label class="form-check-label" for="discount">Descuento</label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="review">Puntuacion</label>
                        <select id="review" class="form-control" name="review" id="">
                           <option selected>Estrellas</option> 
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>

                        </select>
                    </div>
                    <button class="btn btn-primary" type="submit">Filtrar</button>
                </form>


            </ul>
        </div>
    </nav>



         {% for product in products %}
            <div class=" col">
                <img src="{{ product.thumbnail.url }}" class="rounded mx-auto d-block " alt="">
               <div class="box-element">
                   
                   <h6 class="text-center">{{product.name}}</h6>
                   <h6>Puntuacion: {% if product.get_rating == 0 %}No hay reviews{% else %} {{ product.get_rating|floatformat:1 }} {% endif %}</h6>
                   <hr>
                   <a class="btn btn-sm btn-outline-info add-btn" href="{% url 'product_detail' category.slug product.slug %}">Ver mas</a>
                   <p class="float-right"> 
                       {% if product.disccount_price %}
                    <del style="color: grey;">C${{ product.price }}</del>
                   <span>C${{ product.disccount_price }}</span> 
                {% else %}
               C${{ product.price }}
                {% endif %}</p>
               </div>
    
            </div>
            {% endfor %}  

        </div>
</div>


    


{% endblock %}
